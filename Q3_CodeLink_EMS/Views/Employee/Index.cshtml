@model List<Q3_CodeLink_EMS.Models.Employee>

@* Success/failure popup *@
@if (TempData["Message"] != null)
{
    var alertType = TempData["MessageType"] ?? "info";
    <div class="alert alert-@alertType alert-dismissible fade show" role="alert">
        @TempData["Message"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
<h2>Employee records:</h2>
<div class="mb-3">
    <a asp-controller="Employee" asp-action="Add" class="btn btn-success">Add an employee record</a>
    <a asp-controller="Employee" asp-action="Index" class="btn btn-secondary ms-2">Show all employee records</a>
    <a asp-controller="Employee" asp-action="Dummy" class="btn btn-secondary ms-2">Add dummy employee records</a>
</div>
@* Search functionality *@
<form asp-controller="Employee" asp-action="Index" method="get" class="d-flex align-items-center gap-2 mb-3">
    <select name="searchField" class="form-select w-auto">
        <option value="Id" selected="@(ViewBag.SearchField == "Id")">ID</option>
        <option value="FullName" selected="@(ViewBag.SearchField == "FullName")">Full name</option>
        <option value="EmailAddress" selected="@(ViewBag.SearchField == "EmailAddress")">Email address</option>
        <option value="JobTitle" selected="@(ViewBag.SearchField == "JobTitle")">Job title</option>
        <option value="Department" selected="@(ViewBag.SearchField == "Department")">Department</option>
    </select>
    <input type="text" name="searchValue" class="form-control" placeholder="Enter search value..." value="@ViewBag.SearchValue"/>
    <button type="submit" class="btn btn-primary">Search</button>
</form>
@* Displaying of models if there are any in the InMemory database *@
@if (Model?.Any() == true)
{
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Full name</th>
                <th>Email address</th>
                <th>Job title</th>
                <th>Department</th>
                <th>Manage</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var employee in Model)
            {
                <tr>
                    <td>@employee.Id</td>
                    <td>@employee.FullName</td>
                    <td>@employee.EmailAddress</td>
                    @if (string.IsNullOrEmpty(employee.JobTitle))
                    {
                        <td>Not specified</td>
                    }
                    else
                    {
                        <td>@employee.JobTitle</td>
                    }
                    @if (string.IsNullOrEmpty(employee.Department))
                    {
                        <td>Not specified</td>
                    }
                    else
                    {
                        <td>@employee.Department</td>
                    }
                    <td>
                        <a class="btn btn-warning" asp-controller="Employee" asp-action="Edit" asp-route-id="@employee.Id">Edit</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
<h6>No employee records to display.</h6>
}
